<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Home Page</title>
</head>
<body>
  <nav>
    <button id="saveButton" onclick="saveButton()">Save html</button>
    <a id="parentContentLink" href='javascript:goHomePage()'>Home</a>
    <select id="childSubjects">
      <option value="home">Home</option>
      <!-- Children are added here onload with setChildSubjects -->
    </select>
    <!-- Add a previous and next button for prior requests? -->
    <!-- Add a button to save the current page as a markdown file -->
  </nav>

  <div id="content">  
    <div id="parentContent">
        <p>Here are two fruits:</p>
<ol>
<li><strong>Apple</strong></li>
<li><strong>Banana</strong></li>
</ol>
<p>Would you like to know more about these fruits, or are there other fruits you're interested in? Perhaps you have a favorite fruit you'd like to share?</p>

    </div>
    <div id="childDivs">
      <div title="Apple" id="childContent1" onclick="setVisibileChild('childContent1')" hidden=true><h1>Apple</h1>
<p>The apple is a fruit that belongs to the rose family, scientifically known as <em>Malus domestica</em>. Here are some detailed aspects about apples:</p>
<h2><strong>Botanical Information</strong></h2>
<ul>
<li><strong>Species</strong>: Apples are members of the genus <em>Malus</em>, which includes around 50 species.</li>
<li><strong>Growth</strong>: Apple trees are deciduous and can grow to a height of 6 to 15 meters (20 to 49 feet). They require a period of cold dormancy to produce fruit, which makes them suitable for temperate climates.</li>
</ul>
<h2><strong>Varieties</strong></h2>
<ul>
<li><strong>Popular Types</strong>: There are thousands of apple varieties, but some of the most popular include:<ul>
<li><strong>Red Delicious</strong>: Known for its bright red color and mildly sweet flavor.</li>
<li><strong>Granny Smith</strong>: Famous for its bright green color and tart taste, often used in cooking.</li>
<li><strong>Gala</strong>: A sweet and aromatic variety with a pink-orange striped skin.</li>
<li><strong>Fuji</strong>: Known for its sweetness and crisp texture, often used for snacking.</li>
</ul>
</li>
</ul>
<h2><strong>Nutritional Value</strong></h2>
<ul>
<li><strong>Vitamins and Minerals</strong>: Apples are rich in fiber, vitamin C, and various antioxidants. A medium-sized apple contains about 95 calories and 4 grams of fiber.</li>
<li><strong>Health Benefits</strong>: Regular consumption of apples has been linked to a reduced risk of several chronic diseases, including type 2 diabetes, heart disease, and certain cancers.</li>
</ul>
<h2><strong>Culinary Uses</strong></h2>
<ul>
<li><strong>Fresh Eating</strong>: Apples are commonly eaten raw as a healthy snack.</li>
<li><strong>Cooking</strong>: They can be used in a variety of dishes, including pies, tarts, and sauces. Applesauce and apple butter are popular preserves.</li>
<li><strong>Beverages</strong>: Apples are used to make cider, both alcoholic and non-alcoholic varieties.</li>
</ul>
<h2><strong>Cultural Significance</strong></h2>
<ul>
<li><strong>Symbolism</strong>: In many cultures, apples symbolize knowledge, health, and temptation, famously depicted in the story of Adam and Eve.</li>
<li><strong>Festivals</strong>: There are numerous apple festivals around the world, celebrating the harvest and the fruit's versatility.</li>
</ul>
<h2><strong>Storage and Preservation</strong></h2>
<ul>
<li><strong>Fresh Storage</strong>: Apples can be stored at room temperature for a short period, but they last longer when refrigerated.</li>
<li><strong>Long-term Preservation</strong>: Methods include canning, freezing, and drying to preserve apples for extended periods.</li>
</ul>
<p>This detailed overview of apples covers their botanical background, variety, nutritional benefits, culinary applications, cultural significance, and preservation methods. </p>
<p>ResponseID:8af2308c-ad67-40</p>
</div><div title="Banana

Apple nutrition" id="childContent2" onclick="setVisibileChild('childContent2')" hidden=true><h1>Banana</h1>
<h2>Overview</h2>
<p>The banana is a long, curved fruit that typically grows in tropical regions. It's known scientifically as Musa and is part of the Musaceae family. Bananas are one of the most popular fruits globally due to their sweet taste, creamy texture, and convenience as a snack.</p>
<h2>Nutritional Profile</h2>
<p>Bananas are rich in several nutrients, including:</p>
<ul>
<li><strong>Potassium</strong>: Essential for heart health and muscle function.</li>
<li><strong>Vitamin C</strong>: An antioxidant that supports immune health.</li>
<li><strong>Vitamin B6</strong>: Important for brain development and function.</li>
<li><strong>Dietary Fiber</strong>: Aids in digestion and helps maintain bowel health.</li>
</ul>
<p>A medium-sized banana (about 118 grams) contains approximately:</p>
<ul>
<li>Calories: 105</li>
<li>Carbohydrates: 27 grams</li>
<li>Sugar: 14 grams</li>
<li>Fiber: 3 grams</li>
<li>Fat: 0.3 grams</li>
<li>Protein: 1.3 grams</li>
</ul>
<h2>Health Benefits</h2>
<ul>
<li><strong>Digestive Health</strong>: The fiber in bananas can help regulate the digestive system.</li>
<li><strong>Heart Health</strong>: High potassium content may help manage blood pressure.</li>
<li><strong>Energy Boost</strong>: The natural sugars in bananas provide a quick source of energy.</li>
<li><strong>Mood Enhancer</strong>: Bananas contain tryptophan, which the body converts into serotonin, improving mood.</li>
</ul>
<h2>Uses</h2>
<p>Bananas are versatile in culinary applications:</p>
<ul>
<li><strong>Raw</strong>: Eaten as a standalone snack.</li>
<li><strong>In Smoothies</strong>: Adds creaminess and sweetness.</li>
<li><strong>In Baking</strong>: Used in recipes for banana bread, muffins, and cakes.</li>
<li><strong>Fried</strong>: Popular in some cuisines as a sweet treat.</li>
</ul>
<h2>Varieties</h2>
<p>There are several types of bananas, including:</p>
<ul>
<li><strong>Cavendish</strong>: The most common variety found in supermarkets.</li>
<li><strong>Plantain</strong>: Used in cooking and often considered a vegetable.</li>
<li><strong>Red Banana</strong>: Smaller and sweeter than the Cavendish, with a red peel.</li>
</ul>
<h2>Cultural Significance</h2>
<p>Bananas have significant cultural importance in many countries:</p>
<ul>
<li>In <strong>India</strong>, bananas are used in religious rituals.</li>
<li>In <strong>Latin America</strong>, plantains are a staple food.</li>
<li>In <strong>Southeast Asia</strong>, banana leaves are used for cooking and serving food.</li>
</ul>
<h2>Fun Facts</h2>
<ul>
<li>Bananas grow upside down, towards the sun.</li>
<li>The scientific name for banana, Musa, is derived from Antonius Musa, the physician to the Roman emperor Augustus.</li>
<li>Bananas are technically berries, as they form from a single flower with one ovary and have seeds (though the seeds in most bananas are very small and not noticeable).</li>
</ul>
<p>ResponseID:c0e138fd-7fc5-4b</p>
</div><div title="benefits" id="childContent3" onclick="setVisibileChild('childContent3')" hidden=true><h1>Benefits of Bananas</h1>
<p>Bananas are not only delicious but also packed with numerous health benefits. Here's a detailed look at the advantages of including bananas in your diet:</p>
<h2>Nutritional Profile</h2>
<ul>
<li><strong>Calories</strong>: A medium-sized banana contains about 105 calories, making it a satisfying yet low-calorie snack.</li>
<li><strong>Vitamins</strong>: Rich in vitamin C, vitamin B6, and potassium.</li>
<li><strong>Fiber</strong>: Contains around 3 grams of fiber, aiding in digestive health.</li>
</ul>
<h2>Health Benefits</h2>
<h3>1. <strong>Heart Health</strong></h3>
<p>Bananas are high in potassium, which helps manage blood pressure and reduces the risk of heart disease. The American Heart Association recommends potassium to counteract the effects of sodium and to help lower blood pressure.</p>
<h3>2. <strong>Digestive Health</strong></h3>
<p>The fiber in bananas helps regulate bowel movements and can alleviate both constipation and diarrhea. The pectin in bananas acts as a prebiotic, feeding beneficial gut bacteria.</p>
<h3>3. <strong>Energy Boost</strong></h3>
<p>Bananas are a great source of natural sugars like glucose, fructose, and sucrose, providing a quick and sustained energy boost. This makes them an excellent choice for athletes or anyone needing a quick energy lift.</p>
<h3>4. <strong>Mood Enhancement</strong></h3>
<p>Bananas contain tryptophan, an amino acid that the body converts into serotonin, which can improve mood and help with sleep. Vitamin B6 in bananas also plays a role in serotonin production.</p>
<h3>5. <strong>Weight Management</strong></h3>
<p>The fiber content in bananas can help you feel full longer, which can aid in weight management. Additionally, their low glycemic index helps in maintaining stable blood sugar levels.</p>
<h3>6. <strong>Skin Health</strong></h3>
<p>The vitamin C in bananas helps in collagen formation, which is essential for skin health. Applying banana directly to the skin can also moisturize and nourish due to its vitamin and mineral content.</p>
<h2>Culinary Uses</h2>
<ul>
<li><strong>Snack</strong>: Eat them as they are, or slice them over cereal or yogurt.</li>
<li><strong>Smoothies</strong>: Blend bananas with other fruits and vegetables for a nutritious drink.</li>
<li><strong>Baking</strong>: Use mashed bananas as a natural sweetener in recipes for cakes, muffins, and bread.</li>
</ul>
<h2>Fun Facts</h2>
<ul>
<li>Bananas grow on plants, not trees. The banana plant is actually a type of herbaceous perennial.</li>
<li>The scientific name for banana is Musa, and there are over 1,000 varieties of bananas worldwide.</li>
</ul>
<p>Incorporating bananas into your diet can provide a range of health benefits, from improved heart health to better digestive function, making them a versatile and beneficial food choice.</p>
<p>ResponseID:113450e5-52e6-45</p>
</div><div title="varieties" id="childContent4" onclick="setVisibileChild('childContent4')" hidden=true><h1>Varieties of Bananas</h1>
<p>Bananas are one of the most popular fruits worldwide, and they come in a variety of types, each with unique flavors and uses. Here are some of the most notable varieties:</p>
<h2>Cavendish</h2>
<ul>
<li><strong>Description</strong>: The most widely exported banana, known for its creamy texture and sweet flavor.</li>
<li><strong>Use</strong>: Commonly found in supermarkets, used in desserts, smoothies, and eaten raw.</li>
<li><strong>Origin</strong>: Originally from Southeast Asia, now grown in many tropical regions.</li>
</ul>
<h2>Plantain</h2>
<ul>
<li><strong>Description</strong>: Larger and starchier than the Cavendish, often cooked before eating.</li>
<li><strong>Use</strong>: Used in savory dishes, fried, boiled, or baked. Popular in Latin American and African cuisines.</li>
<li><strong>Origin</strong>: Native to Southeast Asia, widely cultivated in tropical regions.</li>
</ul>
<h2>Lady Finger</h2>
<ul>
<li><strong>Description</strong>: Smaller and sweeter than the Cavendish, with a thinner skin.</li>
<li><strong>Use</strong>: Often used in desserts and eaten raw. Popular in Australia and Southeast Asia.</li>
<li><strong>Origin</strong>: Southeast Asia, particularly popular in Thailand and the Philippines.</li>
</ul>
<h2>Red Banana</h2>
<ul>
<li><strong>Description</strong>: Has a distinctive red or purplish skin when ripe, with a sweet flavor and creamy texture.</li>
<li><strong>Use</strong>: Eaten raw, used in desserts, and in some savory dishes. Often used for decorative purposes.</li>
<li><strong>Origin</strong>: Native to Southeast Asia, also grown in East Africa and the Caribbean.</li>
</ul>
<h2>Blue Java</h2>
<ul>
<li><strong>Description</strong>: Known as the "ice cream banana" due to its vanilla-like flavor and creamy texture.</li>
<li><strong>Use</strong>: Eaten raw, used in desserts, and sometimes cooked. Popular in Hawaii and Southeast Asia.</li>
<li><strong>Origin</strong>: Southeast Asia, particularly popular in the Philippines and Indonesia.</li>
</ul>
<h2>Manzano</h2>
<ul>
<li><strong>Description</strong>: Also known as the apple banana, it has a sweet, apple-like flavor and a firmer texture.</li>
<li><strong>Use</strong>: Eaten raw, used in fruit salads, and in some desserts. Popular in Central and South America.</li>
<li><strong>Origin</strong>: Central and South America, particularly in countries like Costa Rica and Colombia.</li>
</ul>
<p>These varieties showcase the diversity of bananas, each offering unique culinary possibilities and nutritional benefits. Whether you're looking for a sweet snack or an ingredient for a savory dish, there's a banana variety that can meet your needs.</p>
<p>ResponseID:e84a8095-c6d9-4d</p>
</div><div title="recipes
Banana: nutrition" id="childContent5" onclick="setVisibileChild('childContent5')" hidden=true><h1>Banana Recipes</h1>
<p>Bananas are incredibly versatile and can be used in a variety of recipes, ranging from sweet to savory dishes. Here are some detailed insights into using bananas in your cooking and baking:</p>
<h2>Smoothies and Shakes</h2>
<ul>
<li><strong>Banana Smoothie</strong>: Blend bananas with milk or a milk alternative, and add other fruits like berries or mango for a refreshing drink. You can also include yogurt for creaminess and a protein boost.</li>
<li><strong>Banana Milkshake</strong>: For a richer treat, blend bananas with ice cream and milk. Add flavors like vanilla, chocolate, or peanut butter for variety.</li>
</ul>
<h2>Baking</h2>
<ul>
<li><strong>Banana Bread</strong>: One of the most popular uses for overripe bananas. Combine mashed bananas with flour, sugar, eggs, and baking soda. You can add nuts or chocolate chips for texture and flavor.</li>
<li><strong>Banana Muffins</strong>: Similar to banana bread but in individual portions. These can be a great on-the-go breakfast or snack.</li>
<li><strong>Banana Cake</strong>: A lighter alternative to banana bread, often layered with frosting. Banana cake can be paired with cream cheese or chocolate frosting for a decadent dessert.</li>
</ul>
<h2>Desserts</h2>
<ul>
<li><strong>Banana Split</strong>: A classic dessert featuring bananas cut lengthwise and topped with ice cream, syrups, whipped cream, nuts, and cherries.</li>
<li><strong>Banana Foster</strong>: Bananas cooked in a caramel sauce with rum and banana liqueur, often flambéed and served over ice cream.</li>
<li><strong>Banana Pudding</strong>: Layers of vanilla wafers, sliced bananas, and custard, topped with whipped cream. A southern U.S. favorite.</li>
</ul>
<h2>Savory Dishes</h2>
<ul>
<li><strong>Banana Curry</strong>: In some cuisines, bananas are used in savory dishes like curries, adding a sweet contrast to spicy flavors.</li>
<li><strong>Banana Fritters</strong>: Sliced bananas dipped in batter and deep-fried, often served as a side dish or snack.</li>
</ul>
<h2>Nutrition Tips in Recipes</h2>
<ul>
<li><strong>High in Potassium</strong>: When using bananas in recipes, you're also adding a good source of potassium, which is beneficial for heart health.</li>
<li><strong>Natural Sweetener</strong>: Bananas can replace sugar in many recipes, reducing the need for added sweeteners and enhancing the nutritional profile of the dish.</li>
<li><strong>Fiber Content</strong>: Incorporating bananas into your diet through recipes helps increase your fiber intake, aiding in digestion.</li>
</ul>
<p>These recipes not only showcase the versatility of bananas but also highlight their nutritional benefits, making them a fantastic ingredient to experiment with in the kitchen.</p>
<p>ResponseID:1a93564b-f7b8-44</p>
</div><div title="benefits" id="childContent6" onclick="setVisibileChild('childContent6')" hidden=true><h1>Benefits of Fruits</h1>
<h2>Apples</h2>
<ul>
<li><strong>Nutritional Value</strong>: Apples are rich in fiber, vitamins, and antioxidants. They contain vitamin C, which supports the immune system, and quercetin, an antioxidant that may reduce inflammation.</li>
<li><strong>Digestive Health</strong>: The fiber in apples helps regulate bowel movements and promotes a healthy digestive system.</li>
<li><strong>Weight Management</strong>: Apples are low in calories but high in fiber, which can help you feel full longer, aiding in weight control.</li>
<li><strong>Heart Health</strong>: The soluble fiber in apples can help lower cholesterol levels, reducing the risk of heart disease.</li>
<li><strong>Dental Health</strong>: Eating apples stimulates saliva production, which helps reduce tooth decay by lowering mouth acidity.</li>
</ul>
<h2>Bananas</h2>
<ul>
<li><strong>Energy Boost</strong>: Bananas are high in carbohydrates and provide quick energy, making them ideal for athletes or as a pre-workout snack.</li>
<li><strong>Digestive Health</strong>: They contain dietary fiber, which aids in maintaining regular bowel movements and preventing constipation.</li>
<li><strong>Heart Health</strong>: Bananas are a good source of potassium, which helps manage blood pressure and supports heart function.</li>
<li><strong>Mood Enhancement</strong>: They contain tryptophan, a precursor to serotonin, which can improve mood and help with sleep.</li>
<li><strong>Nutritional Value</strong>: Rich in vitamins like B6 and C, bananas support brain health and immune function.</li>
</ul>
<p>ResponseID:415170a5-5ac4-4b</p>
</div><div title="varieties" id="childContent7" onclick="setVisibileChild('childContent7')" hidden=true><h1>Varieties of Fruits</h1>
<h2>Apple Varieties</h2>
<ul>
<li><strong>Red Delicious</strong>: Known for its bright red color and mildly sweet flavor. Often used for snacking.</li>
<li><strong>Granny Smith</strong>: Green and tart, ideal for baking and cooking due to its firm texture.</li>
<li><strong>Fuji</strong>: Sweet and crisp, perfect for eating fresh or in salads.</li>
<li><strong>Gala</strong>: Sweet with a mild flavor, good for both eating fresh and in recipes.</li>
<li><strong>Honeycrisp</strong>: Known for its explosive crunch and sweet-tart balance, excellent for snacking.</li>
</ul>
<h2>Banana Varieties</h2>
<ul>
<li><strong>Cavendish</strong>: The most common banana variety, sweet and creamy when ripe, used widely in supermarkets.</li>
<li><strong>Plantain</strong>: Larger and starchier than the Cavendish, often cooked or fried, used in savory dishes.</li>
<li><strong>Red Banana</strong>: Sweeter and smaller than the Cavendish, with a slightly tangy flavor, often used in desserts.</li>
<li><strong>Lady Finger</strong>: Smaller and sweeter, with a thinner skin, good for eating fresh or in fruit salads.</li>
</ul>
<p>These varieties showcase the diversity within just two types of fruits, each offering unique flavors and uses in culinary applications.</p>
<p>ResponseID:3e31754d-8b20-44</p>
</div><div title="recipes" id="childContent8" onclick="setVisibileChild('childContent8')" hidden=true><h1>Recipes Using Apples and Bananas</h1>
<h2>Apple Recipes</h2>
<h3>Apple Pie</h3>
<ul>
<li><strong>Ingredients</strong>: Apples, sugar, cinnamon, flour, butter, pie crust</li>
<li><strong>Instructions</strong>: <ol>
<li>Preheat oven to 375°F (190°C).</li>
<li>Peel, core, and slice apples.</li>
<li>Mix apples with sugar, cinnamon, and a bit of flour.</li>
<li>Place mixture into a pie crust, dot with butter, and cover with another crust.</li>
<li>Bake for about 45-50 minutes until the crust is golden.</li>
</ol>
</li>
</ul>
<h3>Applesauce</h3>
<ul>
<li><strong>Ingredients</strong>: Apples, water, sugar (optional), cinnamon (optional)</li>
<li><strong>Instructions</strong>: <ol>
<li>Peel, core, and chop apples.</li>
<li>Cook apples with a bit of water until soft.</li>
<li>Mash or blend to desired consistency, add sugar or cinnamon if desired.</li>
</ol>
</li>
</ul>
<h2>Banana Recipes</h2>
<h3>Banana Bread</h3>
<ul>
<li><strong>Ingredients</strong>: Ripe bananas, flour, sugar, eggs, butter, baking soda</li>
<li><strong>Instructions</strong>: <ol>
<li>Preheat oven to 350°F (175°C).</li>
<li>Mash bananas, mix with sugar, eggs, and melted butter.</li>
<li>Stir in flour and baking soda.</li>
<li>Pour into a loaf pan and bake for about 60 minutes.</li>
</ol>
</li>
</ul>
<h3>Banana Smoothie</h3>
<ul>
<li><strong>Ingredients</strong>: Bananas, milk or yogurt, honey, ice</li>
<li><strong>Instructions</strong>: <ol>
<li>Blend bananas with milk or yogurt.</li>
<li>Add honey for sweetness and ice for thickness.</li>
<li>Blend until smooth.</li>
</ol>
</li>
</ul>
<p>These recipes highlight the versatility of apples and bananas in both sweet and healthy dishes. Whether you're baking a comforting pie or blending a quick smoothie, these fruits can be transformed into delicious treats.</p>
<p>ResponseID:f0b36ea1-fbf5-41</p>
</div>
    </div>
  </div>

    <script>
        function saveButton() {
          const content = document.documentElement.outerHTML; // Get the entire HTML content
          const blob = new Blob([content], { type: 'text/html' }); // Create a Blob from the content
          const url = URL.createObjectURL(blob); // Create a URL for the Blob
          const divInnerText = document.getElementById('content').innerText;
          let filename = divInnerText.substring(0, 25);
          const a = document.createElement('a'); // Create an anchor element
          a.href = url; // Set the href to the Blob URL
          
        a.download =  filename + '.html'; // Set the download attribute with a filename
          document.body.appendChild(a); // Append the anchor to the body
          a.click(); // Programmatically click the anchor to trigger the download
          document.body.removeChild(a); // Remove the anchor from the document
          URL.revokeObjectURL(url); // Release the Blob URL
        }
    </script>

    <script>
      function setChildSubjects(){
        let dropDownOptions = [];
        let childSubjects = document.getElementById('childDivs');
        for (let child of childSubjects.children){
           let subject = child.title;
           let optionValue = child.id;

           dropDownOptions.push({subject: subject, value: optionValue});
        
        }

        for (let option of dropDownOptions){
          let optionElement = document.createElement('option');
          optionElement.value = option.value;
          optionElement.text = option.subject;
          document.getElementById('childSubjects').appendChild(optionElement);
        }

        document.getElementById('childSubjects').addEventListener('change', function() {
          if(this.value == "home"){
            goHomePage();
          }else{
            setVisibleChild(this.value);
          }

          }
        );
      }
    </script>


    <script>
      function setVisibleChild(id){
        //quick flicker home to reset state, this allows hoping between child views
     
    
           let topNode = document.getElementById('content');
           let parentNode = document.getElementById('parentContent');
           let childVisibleNode = document.getElementById(id);
           let childDivs = document.getElementById('childDivs');
           for (let child of childDivs.children){
            if(child.id != id){
              child.hidden = true;
            }else{
              child.hidden = false; //redudant
            }
           }
           parentNode.hidden = true;
           childVisibleNode.hidden = false;
         }
      
    </script>

    <script>
      function goHomePage(){
         let topNode = document.getElementById('content');
         let parentNode = document.getElementById('parentContent');
         let children = document.getElementById('childDivs');
         for (let child of children.children){
            child.hidden = true;
         }
         parentNode.hidden = false;
      }
    </script>

    <script>
      function setChildLinks(){
        let children = document.getElementById('childDivs'); 
        let childSubjects = [];
        let discoveredMatches = [];

        
        for (let child of children.children){
          let subject = child.title;
          childSubjects.push({subject: subject, child: child});
          }
             
          let parentNodeH2Subjects = []
          let parentNodeH3Subjects = []
          let parentNodeH4Subjects = []
          let parentNode = document.getElementById('parentContent');
          let H2s = parentNode.getElementsByTagName("H2");
          let H3s = parentNode.getElementsByTagName("H3");
          let H4s = parentNode.getElementsByTagName("H4");
          let isH2Match = false;
          let isH3Match = false;
          let isH4Match = false;

          H2s.length > 0? parentNodeH2Subjects = H2s.map(item => ({subject: item.innerText, item: item})):isH2Match = false;
          H3s.length > 0?parentNodeH3Subjects = H3s.map(item => ({subject: item.innerText, item: item})):isH3Match = false;
          H4s.length > 0?parentNodeH4Subjects = H4s.map(item => ({subject: item.innerText, item: item})):isH4Match = false;

          
           isH3Match = H3s.length == childSubjects.length;
           isH2Match = H2s.length == childSubjects.length;
           isH4Match = H4s.length == childSubjects.length;
          let allDiscovered = false;

          if (isH3Match){
            //We have a match.  We need to find the H2s
            allDiscovered = true;
          }
          if (isH2Match){
            //We have a match.  We need to find the H3s
            allDiscovered = true;
          }
          if (isH4Match){
            //We have a match.  We need to find the H2s
            allDiscovered = true;
          }

          if(allDiscovered && (isH3Match + isH2Match + isH4Match) > 1){
            //wierd.  ok we work from scratch.
            allDiscovered = false;
          }

          if(!allDiscovered){

            let fluffWords = ["a", "an", "the", "and", "but", "or", "for", "nor", "on", "at", "to", "from", "by", "with", "of"];
            let fluffWordsRegex = new RegExp(fluffWords.join("|"), "g");
          
          //OK time to stumble through unpredictable llm output
          //First check if the child subjects are in the parent node h2 subjects
          let isH2 = false;
          let isH3 = false;
          let isH4 = false;
      
          //This can be optimized later.  Probably doesnt matter since it is client side with modern computing.
          for (let i = 0; i < parentNodeH2Subjects.length; i++){
            let subject = parentNodeH2Subjects[i].subject;
            for (let j = 0; j < childSubjects.length; j++){
              let childSubject = childSubjects[j].subject;
              if(childSubject.replace(fluffWordsRegex, "") == subject.replace(fluffWordsRegex, "")){
                isH2 = true;
                discoveredMatches.push({parentLink: parentNodeH2Subjects[i].item, childLink: childSubjects[j].child});
              }
            }

          }
         
          if(!isH2){
            for (let i = 0; i < parentNodeH3Subjects.length; i++){
              let subject = parentNodeH3Subjects[i].subject;
              for (let j = 0; j < childSubjects.length; j++){
                let childSubject = childSubjects[j].subject;  
                if(childSubject.replace(fluffWordsRegex, "") == subject.replace(fluffWordsRegex, "")){
                  isH3 = true;
                  discoveredMatches.push({parentLink: parentNodeH3Subjects[i].item, childLink: childSubjects[j].child});
                }
              }
            }
          }

          if(!isH3){
            for (let i = 0; i < parentNodeH4Subjects.length; i++){
              let subject = parentNodeH4Subjects[i].subject;
              for (let j = 0; j < childSubjects.length; j++){
                let childSubject = childSubjects[j].subject;
                if(childSubject.replace(fluffWordsRegex, "") == subject.replace(fluffWordsRegex, "")){
                  isH4 = true;
                  discoveredMatches.push({parentLink: parentNodeH4Subjects[i].item, childLink: childSubjects[j].child});
                }
              }
            }
          }

          if(!isH4){
              //I suppose there are edge cases but this surely covers 99.9% of the cases.
          }

          }else{
            if(isH3Match){
              for (let i = 0; i < parentNodeH3Subjects.length; i++){
                let child = childSubjects[i].child;
                makeChildLinks(parentNodeH3Subjects[i].item, child);
              }
              return; //bye bye
            }
            if(isH2Match){
              for (let i = 0; i < parentNodeH2Subjects.length; i++){
                let child = childSubjects[i].child;
                makeChildLinks(parentNodeH2Subjects[i].item, child);
                return; //bye bye
              }
              if(isH4Match){
                for (let i = 0; i < parentNodeH4Subjects.length; i++){
                  let child = childSubjects[i].child;
                  makeChildLinks(parentNodeH4Subjects[i].item, child);
                }
              }

            }

          }

          for (let match of discoveredMatches){
            makeChildLinks(match.parentLink, match.childLink);
            if(match.length < childSubjects.length){ alert("LLMM added additional info that is hidden");}
          }

        }
    </script>

    <script>
       function makeChildLinks(parent, child){
            parent.style.cursor = "pointer";
            parent.style.textDecoration = "underline";
            parent.style.color = "blue";
            parent.onclick = function(){
              setVisibleChild(child.id);
            }
       }

    </script>

<script>window.onload = setChildSubjects;</script>

</body>
</html>


   
    <!-- <textarea id="userPrompt"></textarea>

    <script>
        function nextButton() {
            const userPrompt = document.getElementById('userPrompt').value;
            console.log(userPrompt);
        }
    </script> -->