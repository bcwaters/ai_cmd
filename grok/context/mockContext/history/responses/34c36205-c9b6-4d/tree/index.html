<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Home Page</title>
  <style>
    pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}/*!
  Theme: StackOverflow Light
  Description: Light theme as used on stackoverflow.com
  Author: stackoverflow.com
  Maintainer: @Hirse
  Website: https://github.com/StackExchange/Stacks
  License: MIT
  Updated: 2021-05-15

  Updated for @stackoverflow/stacks v0.64.0
  Code Blocks: /blob/v0.64.0/lib/css/components/_stacks-code-blocks.less
  Colors: /blob/v0.64.0/lib/css/exports/_stacks-constants-colors.less
*/.hljs{color:#2f3337;background:#f6f6f6}.hljs-subst{color:#2f3337}.hljs-comment{color:#656e77}.hljs-attr,.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-section,.hljs-selector-tag{color:#015692}.hljs-attribute{color:#803378}.hljs-name,.hljs-number,.hljs-quote,.hljs-selector-id,.hljs-template-tag,.hljs-type{color:#b75501}.hljs-selector-class{color:#015692}.hljs-link,.hljs-regexp,.hljs-selector-attr,.hljs-string,.hljs-symbol,.hljs-template-variable,.hljs-variable{color:#54790d}.hljs-meta,.hljs-selector-pseudo{color:#015692}.hljs-built_in,.hljs-literal,.hljs-title{color:#b75501}.hljs-bullet,.hljs-code{color:#535a60}.hljs-meta .hljs-string{color:#54790d}.hljs-deletion{color:#c02d2e}.hljs-addition{color:#2f6f44}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}

    nav {
      display: flex;
      justify-content: space-between;
      align-items: left;
      padding: 10px;
    }
    
    .nav-right {
      display: flex;
      gap: 50px;
      align-items: center;
    }
  </style>
</head>
<body>
  <nav>
    <a id="parentContentLink" href='/?context=34c36205-c9b6-4d'>Prompt again</a>

      <select id="childSubjects">
        <option value="home">Home</option>
        <!-- Children are added here onload with setChildSubjects -->
      </select>
      <!-- Add a previous and next button for prior requests? -->
      <!-- Add a button to save the current page as a markdown file -->

      
      <button id="saveButton" onclick="saveButton()">Save html</button>


  </nav>

  <div id="content">  
    <div id="parentContent">
        <p>Here are two planets in our solar system:</p>
<h3>Mars</h3>
<p>Mars is known as the "Red Planet" due to its reddish appearance caused by iron oxide (rust) on its surface. It is the fourth planet from the Sun and has a thin atmosphere. Mars has been explored by several robotic missions, and there's ongoing interest in its potential for past or present life.</p>
<h3>Jupiter</h3>
<p>Jupiter is the largest planet in our solar system, known for its Great Red Spot, a storm larger than Earth, and its prominent bands of clouds. It is the fifth planet from the Sun and has a thick atmosphere composed mostly of hydrogen and helium. Jupiter has a strong magnetic field and numerous moons, including the four large Galilean moons.</p>
<hr>
<p>Follow-up questions:</p>
<ul>
<li>Would you like to know more about other planets in our solar system?</li>
<li>Are you interested in learning about space missions to these planets?</li>
<li>Do you have any specific questions about Mars or Jupiter?</li>
</ul>

    </div>
    <div id="childDivs">
      <div title="Mars" id="childContent1" onclick="setVisibileChild('childContent1')" hidden=true><h3>Mars: The Red Planet</h3>
<p><strong>Reddish Appearance:</strong>
Mars is famously known as the "Red Planet" because of its distinct reddish color, which is primarily due to the presence of iron oxide, or rust, on its surface. This iron oxide is a result of iron in the Martian soil reacting with oxygen in the atmosphere. The red dust covers much of the planet, giving it a uniform hue when viewed from space.</p>
<p><strong>Fourth Planet from the Sun:</strong>
Mars orbits the Sun at an average distance of about 228 million kilometers (141.7 million miles). It takes Mars approximately 687 Earth days to complete one orbit around the Sun. This position in the solar system places Mars in the habitable zone, where conditions might support liquid water and, potentially, life.</p>
<p><strong>Thin Atmosphere:</strong>
The atmosphere of Mars is very thin, with a pressure at the surface that is less than 1% of Earth's. It is composed mostly of carbon dioxide (about 95%), with minor amounts of nitrogen and argon. The thin atmosphere results in large temperature swings, with daytime temperatures reaching up to 20째C (68째F) and dropping to as low as -140째C (-220째F) at night.</p>
<p><strong>Exploration and Robotic Missions:</strong>
Mars has been the target of numerous exploration missions. The first successful flyby was by NASA's Mariner 4 in 1965, which sent back the first close-up images of the Martian surface. Since then, several orbiters, landers, and rovers have been sent to Mars. Notable missions include:</p>
<ul>
<li><strong>Viking Program (1970s):</strong> Landed on Mars and conducted the first on-site search for signs of life.</li>
<li><strong>Mars Pathfinder (1997):</strong> Included the Sojourner rover, the first wheeled vehicle to operate on another planet.</li>
<li><strong>Spirit and Opportunity Rovers (2004):</strong> Explored the Martian surface for years beyond their planned mission durations, providing invaluable data on Martian geology and climate.</li>
<li><strong>Curiosity Rover (2012):</strong> Continues to explore Mars, studying its geology and climate history, and searching for signs of past microbial life.</li>
<li><strong>Perseverance Rover (2021):</strong> Currently exploring Jezero Crater, collecting samples for future return to Earth, and carrying the Ingenuity helicopter, which has conducted the first powered flight on another planet.</li>
</ul>
<p><strong>Potential for Life:</strong>
The interest in Mars' potential for life stems from evidence suggesting that the planet once had a thicker atmosphere and liquid water on its surface. Features like dried-up river valleys, lake beds, and minerals formed in the presence of water indicate a wetter past. The search for past or present life continues, with missions like Perseverance aiming to collect samples that could contain signs of ancient life.</p>
<hr>
<p>Follow-up questions:</p>
<ul>
<li>Would you like to know more about other planets in our solar system?</li>
<li>Are you interested in learning about space missions to these planets?</li>
<li>Do you have any specific questions about Mars or Jupiter?</li>
</ul>
<p>ResponseID:b0c1e310-ce40-4f</p>
</div><div title="Jupiter" id="childContent2" onclick="setVisibileChild('childContent2')" hidden=true><h3>Jupiter</h3>
<p><strong>Size and Position:</strong>
Jupiter is the largest planet in our solar system, with a diameter of about 86,881 miles (139,822 kilometers). It is the fifth planet from the Sun, orbiting at an average distance of about 778 million kilometers (484 million miles). Its massive size means it has a significant influence on the solar system's dynamics.</p>
<p><strong>Atmosphere:</strong>
Jupiter's atmosphere is primarily composed of hydrogen (about 90%) and helium (about 10%), with trace amounts of methane, water vapor, ammonia, and other compounds. The atmosphere is divided into several layers, with the visible cloud tops showing dynamic bands of clouds that run parallel to the equator. These bands are created by differences in temperature and pressure, leading to different wind patterns and colors.</p>
<p><strong>Great Red Spot:</strong>
The Great Red Spot is a persistent high-pressure region in Jupiter's atmosphere, producing an anticyclonic storm that is larger than Earth. This storm has been observed since at least the 17th century and is known for its deep red color, though its size and color have varied over time. The storm's longevity and size make it a significant feature of Jupiter's weather patterns.</p>
<p><strong>Magnetic Field:</strong>
Jupiter has the strongest magnetic field of any planet in the solar system, about 20,000 times stronger than Earth's. This magnetic field is generated by the motion of metallic hydrogen within Jupiter's core. The magnetosphere extends millions of kilometers into space and traps charged particles, creating intense radiation belts around the planet.</p>
<p><strong>Moons:</strong>
Jupiter has 79 known moons, with the four largest known as the Galilean moons: Io, Europa, Ganymede, and Callisto. These were discovered by Galileo Galilei in 1610. Each of these moons has unique characteristics:</p>
<ul>
<li><strong>Io</strong> is the most volcanically active body in the solar system.</li>
<li><strong>Europa</strong> has a subsurface ocean beneath its icy crust, which is of great interest for potential life.</li>
<li><strong>Ganymede</strong> is the largest moon in the solar system and the only one known to have its own magnetic field.</li>
<li><strong>Callisto</strong> has an ancient, heavily cratered surface and is thought to have a subsurface ocean.</li>
</ul>
<p><strong>Exploration:</strong>
Jupiter has been visited by several spacecraft, including:</p>
<ul>
<li><strong>Pioneer 10</strong> and <strong>Pioneer 11</strong> in the 1970s, which provided the first close-up images of the planet.</li>
<li><strong>Voyager 1</strong> and <strong>Voyager 2</strong> in 1979, which offered detailed images and data about Jupiter and its moons.</li>
<li><strong>Galileo</strong> orbited Jupiter from 1995 to 2003, providing extensive data on the planet's atmosphere, magnetosphere, and moons.</li>
<li><strong>Juno</strong>, launched in 2011, is currently orbiting Jupiter to study its composition, gravity field, magnetic field, and polar magnetosphere.</li>
</ul>
<hr>
<p>Follow-up questions:</p>
<ul>
<li>Would you like to know more about other planets in our solar system?</li>
<li>Are you interested in learning about space missions to these planets?</li>
<li>Do you have any specific questions about Mars or Jupiter?</li>
</ul>
<p>ResponseID:5a5e0f4b-0b08-42</p>
</div>
    </div>
  </div>

    <script>
        function saveButton() {
          const content = document.documentElement.outerHTML; // Get the entire HTML content
          const blob = new Blob([content], { type: 'text/html' }); // Create a Blob from the content
          const url = URL.createObjectURL(blob); // Create a URL for the Blob
          const divInnerText = document.getElementById('content').innerText;
          let filename = divInnerText.substring(0, 25);
          const a = document.createElement('a'); // Create an anchor element
          a.href = url; // Set the href to the Blob URL
          
        a.download =  filename + '.html'; // Set the download attribute with a filename
          document.body.appendChild(a); // Append the anchor to the body
          a.click(); // Programmatically click the anchor to trigger the download
          document.body.removeChild(a); // Remove the anchor from the document
          URL.revokeObjectURL(url); // Release the Blob URL
        }
    </script>

    <script>
      function setChildSubjects(){
        let dropDownOptions = [];
        let childSubjects = document.getElementById('childDivs');
        for (let child of childSubjects.children){
           let subject = child.title;
           let optionValue = child.id;

           dropDownOptions.push({subject: subject, value: optionValue});
        
        }

        for (let option of dropDownOptions){
          let optionElement = document.createElement('option');
          optionElement.value = option.value;
          optionElement.text = option.subject;
          document.getElementById('childSubjects').appendChild(optionElement);
        }

        document.getElementById('childSubjects').addEventListener('change', function() {
          if(this.value == "home"){
            goHomePage();
          }else{
            setVisibleChild(this.value);
          }

          }
        );
      }
    </script>


    <script>
      function setVisibleChild(id){
        //quick flicker home to reset state, this allows hoping between child views
     
    
           let topNode = document.getElementById('content');
           let parentNode = document.getElementById('parentContent');
           let childVisibleNode = document.getElementById(id);
           let childDivs = document.getElementById('childDivs');
           for (let child of childDivs.children){
            if(child.id != id){
              child.hidden = true;
            }else{
              child.hidden = false; //redudant
            }
           }
           parentNode.hidden = true;
           childVisibleNode.hidden = false;
         }
      
    </script>

    <script>
      function goHomePage(){
         let topNode = document.getElementById('content');
         let parentNode = document.getElementById('parentContent');
         let children = document.getElementById('childDivs');
         for (let child of children.children){
            child.hidden = true;
         }
         parentNode.hidden = false;
      }
    </script>

    <script>
      function setChildLinks(){
        let children = document.getElementById('childDivs'); 
        let childSubjects = [];
        let discoveredMatches = [];

        
        for (let child of children.children){
          let subject = child.title;
          childSubjects.push({subject: subject, child: child});
          }
             
          let parentNodeH2Subjects = []
          let parentNodeH3Subjects = []
          let parentNodeH4Subjects = []
          let parentNode = document.getElementById('parentContent');
          let H2s = parentNode.getElementsByTagName("H2");
          let H3s = parentNode.getElementsByTagName("H3");
          let H4s = parentNode.getElementsByTagName("H4");
          let isH2Match = false;
          let isH3Match = false;
          let isH4Match = false;

          H2s.length > 0? parentNodeH2Subjects = H2s.map(item => ({subject: item.innerText, item: item})):isH2Match = false;
          H3s.length > 0?parentNodeH3Subjects = H3s.map(item => ({subject: item.innerText, item: item})):isH3Match = false;
          H4s.length > 0?parentNodeH4Subjects = H4s.map(item => ({subject: item.innerText, item: item})):isH4Match = false;

          
           isH3Match = H3s.length == childSubjects.length;
           isH2Match = H2s.length == childSubjects.length;
           isH4Match = H4s.length == childSubjects.length;
          let allDiscovered = false;

          if (isH3Match){
            //We have a match.  We need to find the H2s
            allDiscovered = true;
          }
          if (isH2Match){
            //We have a match.  We need to find the H3s
            allDiscovered = true;
          }
          if (isH4Match){
            //We have a match.  We need to find the H2s
            allDiscovered = true;
          }

          if(allDiscovered && (isH3Match + isH2Match + isH4Match) > 1){
            //wierd.  ok we work from scratch.
            allDiscovered = false;
          }

          if(!allDiscovered){

            let fluffWords = ["a", "an", "the", "and", "but", "or", "for", "nor", "on", "at", "to", "from", "by", "with", "of"];
            let fluffWordsRegex = new RegExp(fluffWords.join("|"), "g");
          
          //OK time to stumble through unpredictable llm output
          //First check if the child subjects are in the parent node h2 subjects
          let isH2 = false;
          let isH3 = false;
          let isH4 = false;
      
          //This can be optimized later.  Probably doesnt matter since it is client side with modern computing.
          for (let i = 0; i < parentNodeH2Subjects.length; i++){
            let subject = parentNodeH2Subjects[i].subject;
            for (let j = 0; j < childSubjects.length; j++){
              let childSubject = childSubjects[j].subject;
              if(childSubject.replace(fluffWordsRegex, "") == subject.replace(fluffWordsRegex, "")){
                isH2 = true;
                discoveredMatches.push({parentLink: parentNodeH2Subjects[i].item, childLink: childSubjects[j].child});
              }
            }

          }
         
          if(!isH2){
            for (let i = 0; i < parentNodeH3Subjects.length; i++){
              let subject = parentNodeH3Subjects[i].subject;
              for (let j = 0; j < childSubjects.length; j++){
                let childSubject = childSubjects[j].subject;  
                if(childSubject.replace(fluffWordsRegex, "") == subject.replace(fluffWordsRegex, "")){
                  isH3 = true;
                  discoveredMatches.push({parentLink: parentNodeH3Subjects[i].item, childLink: childSubjects[j].child});
                }
              }
            }
          }

          if(!isH3){
            for (let i = 0; i < parentNodeH4Subjects.length; i++){
              let subject = parentNodeH4Subjects[i].subject;
              for (let j = 0; j < childSubjects.length; j++){
                let childSubject = childSubjects[j].subject;
                if(childSubject.replace(fluffWordsRegex, "") == subject.replace(fluffWordsRegex, "")){
                  isH4 = true;
                  discoveredMatches.push({parentLink: parentNodeH4Subjects[i].item, childLink: childSubjects[j].child});
                }
              }
            }
          }

          if(!isH4){
              //I suppose there are edge cases but this surely covers 99.9% of the cases.
          }

          }else{
            if(isH3Match){
              for (let i = 0; i < parentNodeH3Subjects.length; i++){
                let child = childSubjects[i].child;
                makeChildLinks(parentNodeH3Subjects[i].item, child);
              }
              return; //bye bye
            }
            if(isH2Match){
              for (let i = 0; i < parentNodeH2Subjects.length; i++){
                let child = childSubjects[i].child;
                makeChildLinks(parentNodeH2Subjects[i].item, child);
                return; //bye bye
              }
              if(isH4Match){
                for (let i = 0; i < parentNodeH4Subjects.length; i++){
                  let child = childSubjects[i].child;
                  makeChildLinks(parentNodeH4Subjects[i].item, child);
                }
              }

            }

          }

          for (let match of discoveredMatches){
            makeChildLinks(match.parentLink, match.childLink);
            if(match.length < childSubjects.length){ alert("LLMM added additional info that is hidden");}
          }

        }
    </script>

    <script>
       function makeChildLinks(parent, child){
            parent.style.cursor = "pointer";
            parent.style.textDecoration = "underline";
            parent.style.color = "blue";
            parent.onclick = function(){
              setVisibleChild(child.id);
            }
       }

    </script>

<script>window.onload = setChildSubjects;</script>

</body>
</html>


   
    <!-- <textarea id="userPrompt"></textarea>

    <script>
        function nextButton() {
            const userPrompt = document.getElementById('userPrompt').value;
            console.log(userPrompt);
        }
    </script> -->