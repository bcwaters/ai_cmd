<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Home Page</title>
</head>
<body>
  <nav>
    <button id="saveButton" onclick="saveButton()">Save html</button>
    <a id="parentContent" href='javascript:goHomePage()'>Home</a>
    <select id="childSubjects">
      <option value="home">Home</option>
      <!-- Children are added here onload with setChildSubjects -->
    </select>
    <!-- Add a previous and next button for prior requests? -->
    <!-- Add a button to save the current page as a markdown file -->
  </nav>

  <div id="content">  
    <div id="parentContent">
        <h1>Other Planets in Our Solar System</h1>
<h2>Jupiter</h2>
<ul>
<li><strong>Gas Giant</strong>: Jupiter is the largest planet in our solar system.</li>
<li><strong>Great Red Spot</strong>: A persistent high-pressure region in Jupiter's atmosphere.</li>
<li><strong>Moons</strong>: It has 79 known moons, including the four large Galilean moons.</li>
<li><strong>Magnetic Field</strong>: It has a very strong magnetic field.</li>
<li><strong>Exploration</strong>: Has been explored by several spacecraft, including Galileo and Juno.</li>
</ul>
<h2>Saturn</h2>
<ul>
<li><strong>Ring System</strong>: Famous for its extensive and complex ring system.</li>
<li><strong>Gas Giant</strong>: Second largest planet in the solar system.</li>
<li><strong>Moons</strong>: Has 82 known moons, with Titan being the largest.</li>
<li><strong>Atmosphere</strong>: Composed mostly of hydrogen and helium.</li>
<li><strong>Exploration</strong>: Missions like Cassini have provided detailed data about Saturn.</li>
</ul>

    </div>
    <div id="childDivs">
      <div title=""Jupiter" id="childContent1" onclick="setVisibileChild('childContent1')" hidden=true><h1>Jupiter</h1>
<p>Jupiter, the fifth planet from the Sun and the largest in our solar system, is a gas giant known for its striking features and complex atmospheric dynamics. Here's a detailed look at the aspects previously mentioned:</p>
<h3>Gas Giant</h3>
<p>Jupiter is classified as a gas giant, primarily composed of hydrogen and helium, similar to the Sun's composition. Its immense size and mass make it the largest planet in our solar system, with a diameter of about 86,881 miles (139,822 kilometers), which is 11 times that of Earth. This massive planet accounts for two-thirds of the total mass of all the planets in our solar system combined.</p>
<h3>Great Red Spot</h3>
<p>One of Jupiter's most iconic features is the Great Red Spot, a persistent high-pressure region in the planet's southern hemisphere. This storm, larger than the Earth itself, has been observed for over 300 years. The Great Red Spot is a vast anticyclonic storm, with wind speeds reaching up to 432 kilometers per hour (268 miles per hour). Its reddish color is believed to be due to chemical reactions between the planet's atmospheric compounds, though the exact cause remains a subject of scientific study.</p>
<h3>Atmosphere</h3>
<p>Jupiter's atmosphere is dynamic and turbulent, characterized by bands of clouds that run parallel to the equator. These bands, known as belts and zones, are caused by the planet's rapid rotation and internal heat. The belts are darker and consist of descending gas, while the zones are lighter and consist of ascending gas. The atmosphere also contains trace amounts of methane, water vapor, ammonia, and other compounds, which contribute to its complex weather patterns.</p>
<h3>Moons</h3>
<p>Jupiter boasts an impressive array of moons, with 80 known natural satellites. The four largest, known as the Galilean moons—Io, Europa, Ganymede, and Callisto—are particularly noteworthy. Io is the most volcanically active body in the solar system, with hundreds of volcanoes and lava flows. Europa is covered by a thick layer of ice, believed to hide a subsurface ocean that could potentially harbor life. Ganymede is the largest moon in the solar system, even larger than the planet Mercury, and has its own magnetic field. Callisto, the most heavily cratered object in the solar system, offers insights into the early history of the solar system.</p>
<h3>Magnetic Field</h3>
<p>Jupiter's magnetic field is the strongest in the solar system, about 20,000 times that of Earth's. This powerful magnetic field creates intense radiation belts around the planet, which can be harmful to spacecraft. The field is generated by the motion of metallic hydrogen deep within Jupiter's interior, a phenomenon unique to gas giants.</p>
<h3>Exploration</h3>
<p>Jupiter has been a target of numerous space missions due to its scientific importance. The Pioneer and Voyager missions in the 1970s provided the first close-up images of the planet and its moons. The Galileo spacecraft, which orbited Jupiter from 1995 to 2003, offered detailed studies of the planet's atmosphere and moons. More recently, NASA's Juno mission, launched in 2011 and still operational, is studying Jupiter's composition, gravity field, magnetic field, and polar magnetosphere.</p>
<h3>Future Missions</h3>
<p>Future missions to Jupiter are planned to further explore its mysteries. The European Space Agency's JUICE (JUpiter ICy moons Explorer) mission, set to launch in 2022 and arrive at Jupiter in 2029, will focus on the planet's icy moons, particularly Europa, Ganymede, and Callisto, to study their potential for hosting life.</p>
<h3>Life on Jupiter</h3>
<p>While Jupiter itself is unlikely to harbor life due to its harsh environment, its moons, especially Europa and Ganymede, are considered prime candidates for astrobiological research. The subsurface oceans of these moons could potentially support life, making them key targets for future exploration.</p>
<p>ResponseID:db2bd4f2</p>
</div><div title=" Saturn"" id="childContent2" onclick="setVisibileChild('childContent2')" hidden=true><h1>Saturn</h1>
<p>Saturn is renowned for its extensive and complex ring system, which is one of the most striking features in our solar system. Composed mostly of ice particles with a smaller amount of rocky debris and dust, these rings are believed to be remnants from comets, asteroids, or shattered moons that were torn apart by Saturn's gravitational forces.</p>
<p>As the second largest planet in our solar system, Saturn is a gas giant, following Jupiter in size. Its atmosphere is primarily composed of hydrogen and helium, similar to the composition of the Sun. This atmosphere hosts dynamic weather patterns, including strong winds that can reach speeds of up to 1,800 kilometers per hour near the equator.</p>
<p>Saturn has 82 known moons, with Titan being the largest. Titan is particularly interesting because it is the only known moon in the solar system with a substantial atmosphere, which is rich in nitrogen and methane. The surface of Titan harbors lakes and seas of liquid methane and ethane, making it a subject of interest for astrobiology and the search for life beyond Earth.</p>
<p>Exploration of Saturn has been significantly advanced by space missions like the Cassini-Huygens mission, a collaborative project between NASA, ESA, and the Italian Space Agency. The Cassini spacecraft orbited Saturn from 2004 to 2017, providing detailed data about the planet, its rings, and its moons. The Huygens probe, part of this mission, successfully landed on Titan in 2005, sending back valuable data about its surface and atmosphere.</p>
<p>Saturn's magnetic field is another fascinating aspect. It is weaker than Jupiter's but still strong enough to create spectacular auroras at its poles, similar to those on Earth but much more powerful.</p>
<p>The study of Saturn continues to evolve, with future missions planned to delve deeper into its mysteries, particularly focusing on its moons and the potential for life on Titan or Enceladus, another moon known for its subsurface ocean.</p>
<p>ResponseID:b4418cf4</p>
</div>
    </div>
  </div>

    <script>
        function saveButton() {
          const content = document.documentElement.outerHTML; // Get the entire HTML content
          const blob = new Blob([content], { type: 'text/html' }); // Create a Blob from the content
          const url = URL.createObjectURL(blob); // Create a URL for the Blob
          const divInnerText = document.getElementById('content').innerText;
          let filename = divInnerText.substring(0, 25);
          const a = document.createElement('a'); // Create an anchor element
          a.href = url; // Set the href to the Blob URL
          
        a.download =  filename + '.html'; // Set the download attribute with a filename
          document.body.appendChild(a); // Append the anchor to the body
          a.click(); // Programmatically click the anchor to trigger the download
          document.body.removeChild(a); // Remove the anchor from the document
          URL.revokeObjectURL(url); // Release the Blob URL
        }
    </script>

    <script>
      function setChildSubjects(){
        let dropDownOptions = [];
        let childSubjects = document.getElementById('childDivs');
        for (let child of childSubjects.children){
           let subject = child.title;
           let optionValue = child.id;

           dropDownOptions.push({subject: subject, value: optionValue});
        
        }

        for (let option of dropDownOptions){
          let optionElement = document.createElement('option');
          optionElement.value = option.value;
          optionElement.text = option.subject;
          document.getElementById('childSubjects').appendChild(optionElement);
        }

        document.getElementById('childSubjects').addEventListener('change', function() {
          if(this.value == "home"){
            goHomePage();
          }else{
            setVisibileChild(this.value);
          }

          }
        );
      }
    </script>


    <script>
      function setVisibileChild(id){
        //quick flicker home to reset state, this allows hoping between child views
         goHomePage();
         if(id != "parentContent"){
           let topNode = document.getElementById('content');
           let parentNode = document.getElementById('parentContent');
           let childVisibleNode = document.getElementById(id);
           parentNode.hidden = true;
           childVisibleNode.hidden = false;
         }
      }
    </script>

    <script>
      function goHomePage(){
         let topNode = document.getElementById('content');
         let parentNode = document.getElementById('parentContent');
         let children = document.getElementById('childDivs');
         for (let child of children.children){
            child.hidden = true;
         }
         parentNode.hidden = false;
      }
    </script>

    <script>
      function setChildLinks(){
        let children = document.getElementById('childDivs'); 
        let childSubjects = [];
        let discoveredMatches = [];

        
        for (let child of children.children){
          let subject = child.title;
          childSubjects.push({subject: subject, child: child});
          }
             
          let parentNodeH2Subjects = []
          let parentNodeH3Subjects = []
          let parentNodeH4Subjects = []
          let parentNode = document.getElementById('parentContent');
          let H2s = parentNode.getElementsByTagName("H2");
          let H3s = parentNode.getElementsByTagName("H3");
          let H4s = parentNode.getElementsByTagName("H4");
          let isH2Match = false;
          let isH3Match = false;
          let isH4Match = false;

          H2s.length > 0? parentNodeH2Subjects = H2s.map(item => ({subject: item.innerText, item: item})):isH2Match = false;
          H3s.length > 0?parentNodeH3Subjects = H3s.map(item => ({subject: item.innerText, item: item})):isH3Match = false;
          H4s.length > 0?parentNodeH4Subjects = H4s.map(item => ({subject: item.innerText, item: item})):isH4Match = false;

          
           isH3Match = H3s.length == childSubjects.length;
           isH2Match = H2s.length == childSubjects.length;
           isH4Match = H4s.length == childSubjects.length;
          let allDiscovered = false;

          if (isH3Match){
            //We have a match.  We need to find the H2s
            allDiscovered = true;
          }
          if (isH2Match){
            //We have a match.  We need to find the H3s
            allDiscovered = true;
          }
          if (isH4Match){
            //We have a match.  We need to find the H2s
            allDiscovered = true;
          }

          if(allDiscovered && (isH3Match + isH2Match + isH4Match) > 1){
            //wierd.  ok we work from scratch.
            allDiscovered = false;
          }

          if(!allDiscovered){

            let fluffWords = ["a", "an", "the", "and", "but", "or", "for", "nor", "on", "at", "to", "from", "by", "with", "of"];
            let fluffWordsRegex = new RegExp(fluffWords.join("|"), "g");
          
          //OK time to stumble through unpredictable llm output
          //First check if the child subjects are in the parent node h2 subjects
          let isH2 = false;
          let isH3 = false;
          let isH4 = false;
      
          //This can be optimized later.  Probably doesnt matter since it is client side with modern computing.
          for (let i = 0; i < parentNodeH2Subjects.length; i++){
            let subject = parentNodeH2Subjects[i].subject;
            for (let j = 0; j < childSubjects.length; j++){
              let childSubject = childSubjects[j].subject;
              if(childSubject.replace(fluffWordsRegex, "") == subject.replace(fluffWordsRegex, "")){
                isH2 = true;
                discoveredMatches.push({parentLink: parentNodeH2Subjects[i].item, childLink: childSubjects[j].child});
              }
            }

          }
         
          if(!isH2){
            for (let i = 0; i < parentNodeH3Subjects.length; i++){
              let subject = parentNodeH3Subjects[i].subject;
              for (let j = 0; j < childSubjects.length; j++){
                let childSubject = childSubjects[j].subject;  
                if(childSubject.replace(fluffWordsRegex, "") == subject.replace(fluffWordsRegex, "")){
                  isH3 = true;
                  discoveredMatches.push({parentLink: parentNodeH3Subjects[i].item, childLink: childSubjects[j].child});
                }
              }
            }
          }

          if(!isH3){
            for (let i = 0; i < parentNodeH4Subjects.length; i++){
              let subject = parentNodeH4Subjects[i].subject;
              for (let j = 0; j < childSubjects.length; j++){
                let childSubject = childSubjects[j].subject;
                if(childSubject.replace(fluffWordsRegex, "") == subject.replace(fluffWordsRegex, "")){
                  isH4 = true;
                  discoveredMatches.push({parentLink: parentNodeH4Subjects[i].item, childLink: childSubjects[j].child});
                }
              }
            }
          }

          if(!isH4){
              //I suppose there are edge cases but this surely covers 99.9% of the cases.
          }

          }else{
            if(isH3Match){
              for (let i = 0; i < parentNodeH3Subjects.length; i++){
                let child = childSubjects[i].child;
                makeChildLinks(parentNodeH3Subjects[i].item, child);
              }
              return; //bye bye
            }
            if(isH2Match){
              for (let i = 0; i < parentNodeH2Subjects.length; i++){
                let child = childSubjects[i].child;
                makeChildLinks(parentNodeH2Subjects[i].item, child);
                return; //bye bye
              }
              if(isH4Match){
                for (let i = 0; i < parentNodeH4Subjects.length; i++){
                  let child = childSubjects[i].child;
                  makeChildLinks(parentNodeH4Subjects[i].item, child);
                }
              }

            }

          }

          for (let match of discoveredMatches){
            makeChildLinks(match.parentLink, match.childLink);
            if(match.length < childSubjects.length){ alert("LLMM added additional info that is hidden");}
          }

        }
    </script>

    <script>
       function makeChildLinks(parent, child){
            parent.style.cursor = "pointer";
            parent.style.textDecoration = "underline";
            parent.style.color = "blue";
            parent.onclick = function(){
              setVisibileChild(child.id);
            }
       }

    </script>

<script>window.onload = setChildSubjects;</script>

</body>
</html>


   
    <!-- <textarea id="userPrompt"></textarea>

    <script>
        function nextButton() {
            const userPrompt = document.getElementById('userPrompt').value;
            console.log(userPrompt);
        }
    </script> -->